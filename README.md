# T-SQL-task
Jupiter Notebook SQL test 

## Задачи¶
 1. Заказчик утверждает, что продажи с НДС по сети, по группе товаров 'Биологически активные добавки’, в июне 2017 составили: 1 782 949.10 в рублях и 6761.10 в штуках. Процедура ETL исполнителя возвращает другие данные. Необходимо найти и устранить возможные причины расхождений. Пример запуска процедуры: exec sp_report_1 @date_from = '2017-06-01', @date_to = '2017-06-30', @good_group_name = N'Биологически активные добавки'

 2. В результат процедуры необходимо добавить показатели:

         -Средняя цена закупки руб., без НДС
         -Маржа руб. без НДС
         -Наценка % без НДС                
 3. Добавить возможность фильтрации по нескольким группам товаров одновременно. Пример входных данных: 'Биологически активные добавки,Косметические средства' Пример запуска процедуры после модернизации: exec sp_report_1 @date_from = '2017-06-01', @date_to = '2017-06-30', @good_group_name = 'Биологически активные добавки,Косметические средства'

 4. Вывести долю продаж товара в %, относительно общего объема продаж в рублях в разрезе день/магазин/группа товаров, затем отсортировать выборку по убыванию показателя (нужна доля от продаж позиции в аптеке от продажи группы товара в этой же аптеке). Показатель добавить в текущую процедуру формирования данных для отчета. Расчет не должен выполняться с помощью вложенных запросов и CTE. Необходимо использовать функции Transact-SQL.
